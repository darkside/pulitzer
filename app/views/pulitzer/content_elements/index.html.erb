<h1>Content elements for <%= @post.title %></h1>

<div class="pulitzer-row margin-bottom list-item">
  <%= link_back_to_posts(@post.post_type, "Back to #{@post.post_type.name.singularize} Posts", 'Back to post types') %>
</div>

<% if @post.post_type.allow_free_form? %>
  <div class="pulitzer-row margin-bottom list-item">
    <%= ajax_link "add a new content element for #{@post.title}", new_content_element_path(version_id: @post.preview_version), {}, "#new_version_content_element_#{dom_id(@post.preview_version)}" %>
    <div id="new_version_content_element_<%= dom_id(@post.preview_version) %>"></div>
  </div>
<% end %>

<div class="pulitzer-row margin-bottom list-item">
  <h2>Tags</h2>
  <% Pulitzer::Post::TAG_MODELS.each do |tag_model| %>
    <%= render partial: 'pulitzer/post_tags/show_wrapper', locals: { post: @post, tag_model: tag_model } %>
  <% end %>
</div>

<div class="pulitzer-row margin-bottom list-item">
  <h2>Template content elements</h2>
  <% @content_elements.each do |content_element| %>
    <%= render partial: 'show_wrapper', locals: { content_element: content_element } %>
  <% end %>
</div>

<% if @post.post_type.allow_free_form? %>
  <h2>Free form content elements</h2>
  <div class="pulitzer-row margin-bottom list-item" id="version_content_element_container_<%= dom_id(@post.preview_version) %>" id="content_element_list" data-sorter href="<%= update_all_content_elements_path %>">
    <% @free_form_content_elements.each do |content_element| %>
      <%= render partial: 'show_wrapper', locals: { content_element: content_element } %>
    <% end %>
  </div>
<% end %>

<div class="pulitzer-row">
  <%= render partial: 'pulitzer/versions/form', locals: { version: @post.preview_version } %>
</div>
